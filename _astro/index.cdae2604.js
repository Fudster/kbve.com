import{r as l,c as b}from"./index.0b2a3d34.js";import"./lottie-react.esm.d4496b6d.js";import{j as y}from"./jsx-runtime.32b752e4.js";var T={},M={},k={};Object.defineProperty(k,"__esModule",{value:!0}),k.useUnityCanvasId=void 0;var K=l,X=0,Y="react-unity-webgl-canvas",ee=function(){return(0,K.useMemo)((function(){return[Y,++X].join("-")}),[])};k.useUnityCanvasId=ee;var z,j={},E={};Object.defineProperty(E,"__esModule",{value:!0}),E.UnityLoaderStatus=void 0,function(e){e.Idle="Idle",e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"}(z||(z={})),E.UnityLoaderStatus=z;var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.isBrowserEnvironment=void 0,h.isBrowserEnvironment=typeof window<"u"&&typeof document<"u";var te=b&&b.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}u((r=r.apply(e,t||[])).next())}))},ne=b&&b.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(j,"__esModule",{value:!0}),j.useUnityInstance=void 0;var re=l,ae=E,se=h,ie=function(e,t,n,r){(0,re.useEffect)((function(){te(void 0,void 0,void 0,(function(){var a,o;return ne(this,(function(i){switch(i.label){case 0:if(!1===se.isBrowserEnvironment)return[2];if(e!==ae.UnityLoaderStatus.Loaded||null===t)return r.setUnityInstance(null),r.setInitialisationError(null),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.createUnityInstance(t,n,r.setLoadingProgression)];case 2:return a=i.sent(),r.setUnityInstance(a),r.setInitialisationError(null),[3,4];case 3:return o=i.sent(),r.setUnityInstance(null),r.setInitialisationError(o),[3,4];case 4:return[2]}}))}))}),[e,t,n,r])};j.useUnityInstance=ie;var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.useUnityArguments=void 0;var ue=l,oe=function(e){return(0,ue.useMemo)((function(){return{dataUrl:e.unityProvider.unityConfig.dataUrl,frameworkUrl:e.unityProvider.unityConfig.frameworkUrl,codeUrl:e.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:e.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:e.unityProvider.unityConfig.memoryUrl,symbolsUrl:e.unityProvider.unityConfig.symbolsUrl,companyName:e.unityProvider.unityConfig.companyName,productName:e.unityProvider.unityConfig.productName,productVersion:e.unityProvider.unityConfig.productVersion,webglContextAttributes:e.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:e.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:e.devicePixelRatio||1,matchWebGLToCanvasSize:e.matchWebGLToCanvasSize||!0,disabledCanvasEvents:e.disabledCanvasEvents||["contextmenu","dragstart"],print:function(e){},printErr:function(e){}}}),[])};A.useUnityArguments=oe;var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.useUnityLoader=void 0;var D=l,le=h,_=E,ce=function(e){var t=(0,D.useState)(_.UnityLoaderStatus.Loading),n=t[0],r=t[1];return(0,D.useEffect)((function(){if(!1!==le.isBrowserEnvironment){if(null===e)return void r(_.UnityLoaderStatus.Idle);var t=window.document.querySelector('script[src="'.concat(e,'"]'));null===t?((t=window.document.createElement("script")).type="text/javascript",t.src=e,t.async=!0,t.setAttribute("data-status","loading"),window.document.body.appendChild(t),t.addEventListener("load",(function(){return t?.setAttribute("data-status","loaded")})),t.addEventListener("error",(function(){return t?.setAttribute("data-status","error")}))):r("loaded"===t.getAttribute("data-status")?_.UnityLoaderStatus.Loaded:_.UnityLoaderStatus.Error);var n=function(e){return r("load"===e.type?_.UnityLoaderStatus.Loaded:_.UnityLoaderStatus.Error)};return t.addEventListener("load",n),t.addEventListener("error",n),function(){null!==t&&(t.removeEventListener("load",n),t.removeEventListener("error",n),window.document.body.removeChild(t))}}}),[e]),n};O.useUnityLoader=ce,Object.defineProperty(M,"__esModule",{value:!0}),M.Unity=void 0;var Q=l,H=l,de=k,ve=j,fe=A,ye=O,me=(0,H.forwardRef)((function(e,t){var n=(0,H.useRef)(null),r=(0,de.useUnityCanvasId)(),a=(0,fe.useUnityArguments)(e),o=(0,ye.useUnityLoader)(e.unityProvider.unityConfig.loaderUrl);return(0,ve.useUnityInstance)(o,n.current,a,e.unityProvider),(0,Q.useImperativeHandle)(t,(function(){return n.current})),(0,Q.createElement)("canvas",{ref:n,id:r,style:e.style,className:e.className,tabIndex:e.tabIndex})}));M.Unity=me;var P={},C={};Object.defineProperty(C,"__esModule",{value:!0}),C.errorMessages=void 0;var be={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"};C.errorMessages=be;var $={},V=b&&b.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)(r||!(a in t))&&(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty($,"__esModule",{value:!0}),$.useEventSystem=void 0;var w=l,Ue=C,_e=h,N=[],ge=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=void 0;return N.forEach((function(n){r=n.apply(void 0,V([e],t,!1))})),r};!0===_e.isBrowserEnvironment&&(window.dispatchReactUnityEvent=ge);var he=function(){var e=(0,w.useRef)([]),t=(0,w.useCallback)((function(t,n){e.current=V(V([],e.current,!0),[{eventName:t,callback:n}],!1)}),[e]),n=(0,w.useCallback)((function(t,n){e.current=e.current.filter((function(e){return e.eventName!==t&&e.callback!==n}))}),[e]),r=(0,w.useCallback)((function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var a=e.current.find((function(e){return e.eventName===t}));if(!(typeof a>"u"))return a.callback.apply(a,n);console.warn(Ue.errorMessages.noEventListener,{eventName:t})}),[e]);return(0,w.useEffect)((function(){return N.push(r),function(){N.splice(N.indexOf(r),1)}}),[r]),{addEventListener:t,removeEventListener:n}};$.useEventSystem=he;var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.useNullableState=void 0;var we=l,Ee=function(e){return(0,we.useState)(e||null)};R.useNullableState=Ee;var Ce=b&&b.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}u((r=r.apply(e,t||[])).next())}))},Le=b&&b.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(P,"__esModule",{value:!0}),P.useUnityContext=void 0;var m=l,g=C,Ie=$,Z=R,Se=function(e){var t=(0,Z.useNullableState)(),n=t[0],r=t[1],a=(0,m.useState)(0),o=a[0],i=a[1],s=(0,m.useState)(!1),u=s[0],l=s[1],c=(0,Z.useNullableState)(),d=c[0],y=c[1],f=(0,Ie.useEventSystem)(),v=(0,m.useRef)({setLoadingProgression:i,setInitialisationError:y,setUnityInstance:r,setIsLoaded:l,unityConfig:e}),b=(0,m.useCallback)((function(e){null!==n?n.SetFullscreen(!0===e?1:0):console.warn(g.errorMessages.requestFullscreenNoUnityInstance)}),[n]),p=(0,m.useCallback)((function(){if(!(null===n||typeof n.Module.canvas>"u"))return n.Module.canvas.requestPointerLock();console.warn(g.errorMessages.requestPointerLockNoUnityInstanceOrCanvas)}),[n]),U=(0,m.useCallback)((function(e,t,r){null!==n?n.SendMessage(e,t,r):console.warn(g.errorMessages.sendMessageNoUnityInstance)}),[n]),h=(0,m.useCallback)((function(e,t){if(!(null===n||typeof n.Module.canvas>"u"))return n.Module.canvas.toDataURL(e,t);console.warn(g.errorMessages.screenshotNoUnityInstanceOrCanvas)}),[n]),w=(0,m.useCallback)((function(){return null===n?(console.warn(g.errorMessages.quitNoUnityInstance),Promise.reject()):n.Quit()}),[n]),C=(0,m.useCallback)((function(){return Ce(void 0,void 0,void 0,(function(){var e;return Le(this,(function(t){switch(t.label){case 0:return null===n||typeof n.Module.canvas>"u"?(console.warn(g.errorMessages.genericNoUnityInstance),[2,Promise.reject()]):(e=n.Module.canvas,document.body.appendChild(e),e.style.display="none",[4,w()]);case 1:return t.sent(),e.remove(),[2]}}))}))}),[n]);return(0,m.useEffect)((function(){l(1===o)}),[o]),{unityProvider:v.current,loadingProgression:o,initialisationError:d,isLoaded:u,UNSAFE__unityInstance:n,requestFullscreen:b,requestPointerLock:p,sendMessage:U,unload:w,takeScreenshot:h,addEventListener:f.addEventListener,removeEventListener:f.removeEventListener,UNSAFE__detachAndUnloadImmediate:C}};function Me({apps:e,buttonClass:t}){const[n,r]=l.useState(!0);l.useState(!1);const[a,o]=l.useState(!1),[i,s]=l.useState(),[u,c]=l.useState(),[d,f]=l.useState(t),v=l.useRef(!0),b=l.useRef(null);l.useEffect((()=>()=>{v.current=!1}),[]);const m=l.useCallback((async()=>{n||(r(!0),await API.sendRequest(),v.current&&r(!1))}),[n]),{unityProvider:p,sendMessage:U,addEventListener:g,removeEventListener:h,isLoaded:w,loadingProgression:C}=T.useUnityContext({loaderUrl:e.loaderUrl,dataUrl:e.dataUrl,frameworkUrl:e.frameworkUrl,codeUrl:e.codeUrl}),E=l.useCallback(((e,t)=>{o(!0),s(e),c(t)}),[]);l.useEffect((()=>(g("GameOver",E),()=>{h("GameOver",E)})),[g,h,E]);const L=Math.round(100*C);return!1===n?y.jsx(y.Fragment,{children:y.jsxs("button",{type:"button",className:d,disabled:n,onClick:m,children:["Play Now",y.jsx("span",{className:"absolute top-0 right-0 px-5 py-1 text-xs gradient-text tracking-wider text-center uppercase whitespace-no-wrap origin-bottom-left transform rotate-45 -translate-y-full translate-x-1/3 dark:bg-orange-400",children:"New"})]})}):y.jsxs("div",{children:[!1===w&&y.jsx("div",{className:"loading-overlay",children:y.jsxs("p",{children:["Zane's Rage is Loading... (",L,"%)"]})}),y.jsx(l.Fragment,{children:y.jsx("div",{id:"unity-container",className:"",children:y.jsx(T.Unity,{ref:b,className:"",matchWebGLToCanvasSize:!0,unityProvider:p,style:{width:"100%",height:"100%"}})})})]})}P.useUnityContext=Se,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useUnityContext=e.Unity=void 0;var t=M;Object.defineProperty(e,"Unity",{enumerable:!0,get:function(){return t.Unity}});var n=P;Object.defineProperty(e,"useUnityContext",{enumerable:!0,get:function(){return n.useUnityContext}})}(T);export{Me as default};