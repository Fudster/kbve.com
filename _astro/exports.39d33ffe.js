import{r as b,c as f}from"./index.0b2a3d34.js";var H={},I={},L={};Object.defineProperty(L,"__esModule",{value:!0}),L.useUnityCanvasId=void 0;var J=b,K=0,X="react-unity-webgl-canvas",Y=function(){return(0,J.useMemo)((function(){return[X,++K].join("-")}),[])};L.useUnityCanvasId=Y;var A,S={},h={};Object.defineProperty(h,"__esModule",{value:!0}),h.UnityLoaderStatus=void 0,function(e){e.Idle="Idle",e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"}(A||(A={})),h.UnityLoaderStatus=A;var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.isBrowserEnvironment=void 0,g.isBrowserEnvironment=typeof window<"u"&&typeof document<"u";var Z=f&&f.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(i,s)}u((r=r.apply(e,n||[])).next())}))},ee=f&&f.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(S,"__esModule",{value:!0}),S.useUnityInstance=void 0;var te=b,ne=h,re=g,ae=function(e,n,t,r){(0,te.useEffect)((function(){Z(void 0,void 0,void 0,(function(){var o,a;return ee(this,(function(i){switch(i.label){case 0:if(!1===re.isBrowserEnvironment)return[2];if(e!==ne.UnityLoaderStatus.Loaded||null===n)return r.setUnityInstance(null),r.setInitialisationError(null),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.createUnityInstance(n,t,r.setLoadingProgression)];case 2:return o=i.sent(),r.setUnityInstance(o),r.setInitialisationError(null),[3,4];case 3:return a=i.sent(),r.setUnityInstance(null),r.setInitialisationError(a),[3,4];case 4:return[2]}}))}))}),[e,n,t,r])};S.useUnityInstance=ae;var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.useUnityArguments=void 0;var ie=b,se=function(e){return(0,ie.useMemo)((function(){return{dataUrl:e.unityProvider.unityConfig.dataUrl,frameworkUrl:e.unityProvider.unityConfig.frameworkUrl,codeUrl:e.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:e.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:e.unityProvider.unityConfig.memoryUrl,symbolsUrl:e.unityProvider.unityConfig.symbolsUrl,companyName:e.unityProvider.unityConfig.companyName,productName:e.unityProvider.unityConfig.productName,productVersion:e.unityProvider.unityConfig.productVersion,webglContextAttributes:e.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:e.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:e.devicePixelRatio||1,matchWebGLToCanvasSize:e.matchWebGLToCanvasSize||!0,disabledCanvasEvents:e.disabledCanvasEvents||["contextmenu","dragstart"],print:function(e){},printErr:function(e){}}}),[])};M.useUnityArguments=se;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.useUnityLoader=void 0;var P=b,ue=g,m=h,oe=function(e){var n=(0,P.useState)(m.UnityLoaderStatus.Loading),t=n[0],r=n[1];return(0,P.useEffect)((function(){if(!1!==ue.isBrowserEnvironment){if(null===e)return void r(m.UnityLoaderStatus.Idle);var n=window.document.querySelector('script[src="'.concat(e,'"]'));null===n?((n=window.document.createElement("script")).type="text/javascript",n.src=e,n.async=!0,n.setAttribute("data-status","loading"),window.document.body.appendChild(n),n.addEventListener("load",(function(){return n?.setAttribute("data-status","loaded")})),n.addEventListener("error",(function(){return n?.setAttribute("data-status","error")}))):r("loaded"===n.getAttribute("data-status")?m.UnityLoaderStatus.Loaded:m.UnityLoaderStatus.Error);var t=function(e){return r("load"===e.type?m.UnityLoaderStatus.Loaded:m.UnityLoaderStatus.Error)};return n.addEventListener("load",t),n.addEventListener("error",t),function(){null!==n&&(n.removeEventListener("load",t),n.removeEventListener("error",t),window.document.body.removeChild(n))}}}),[e]),t};p.useUnityLoader=oe,Object.defineProperty(I,"__esModule",{value:!0}),I.Unity=void 0;var q=b,R=b,le=L,ce=S,de=M,ve=p,fe=(0,R.forwardRef)((function(e,n){var t=(0,R.useRef)(null),r=(0,le.useUnityCanvasId)(),o=(0,de.useUnityArguments)(e),a=(0,ve.useUnityLoader)(e.unityProvider.unityConfig.loaderUrl);return(0,ce.useUnityInstance)(a,t.current,o,e.unityProvider),(0,q.useImperativeHandle)(n,(function(){return t.current})),(0,q.createElement)("canvas",{ref:t,id:r,style:e.style,className:e.className,tabIndex:e.tabIndex})}));I.Unity=fe;var k={},E={};Object.defineProperty(E,"__esModule",{value:!0}),E.errorMessages=void 0;var ye={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"};E.errorMessages=ye;var N={},$=f&&f.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)(r||!(o in n))&&(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(N,"__esModule",{value:!0}),N.useEventSystem=void 0;var w=b,be=E,_e=g,C=[],me=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var r=void 0;return C.forEach((function(t){r=t.apply(void 0,$([e],n,!1))})),r};!0===_e.isBrowserEnvironment&&(window.dispatchReactUnityEvent=me);var Ue=function(){var e=(0,w.useRef)([]),n=(0,w.useCallback)((function(n,t){e.current=$($([],e.current,!0),[{eventName:n,callback:t}],!1)}),[e]),t=(0,w.useCallback)((function(n,t){e.current=e.current.filter((function(e){return e.eventName!==n&&e.callback!==t}))}),[e]),r=(0,w.useCallback)((function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=e.current.find((function(e){return e.eventName===n}));if(!(typeof o>"u"))return o.callback.apply(o,t);console.warn(be.errorMessages.noEventListener,{eventName:n})}),[e]);return(0,w.useEffect)((function(){return C.push(r),function(){C.splice(C.indexOf(r),1)}}),[r]),{addEventListener:n,removeEventListener:t}};N.useEventSystem=Ue;var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.useNullableState=void 0;var ge=b,we=function(e){return(0,ge.useState)(e||null)};x.useNullableState=we;var he=f&&f.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(i,s)}u((r=r.apply(e,n||[])).next())}))},Ee=f&&f.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(k,"__esModule",{value:!0}),k.useUnityContext=void 0;var v=b,U=E,Ce=N,F=x,Ie=function(e){var n=(0,F.useNullableState)(),t=n[0],r=n[1],o=(0,v.useState)(0),a=o[0],i=o[1],s=(0,v.useState)(!1),u=s[0],l=s[1],c=(0,F.useNullableState)(),d=c[0],f=c[1],y=(0,Ce.useEventSystem)(),b=(0,v.useRef)({setLoadingProgression:i,setInitialisationError:f,setUnityInstance:r,setIsLoaded:l,unityConfig:e}),p=(0,v.useCallback)((function(e){null!==t?t.SetFullscreen(!0===e?1:0):console.warn(U.errorMessages.requestFullscreenNoUnityInstance)}),[t]),m=(0,v.useCallback)((function(){if(!(null===t||typeof t.Module.canvas>"u"))return t.Module.canvas.requestPointerLock();console.warn(U.errorMessages.requestPointerLockNoUnityInstanceOrCanvas)}),[t]),g=(0,v.useCallback)((function(e,n,r){null!==t?t.SendMessage(e,n,r):console.warn(U.errorMessages.sendMessageNoUnityInstance)}),[t]),w=(0,v.useCallback)((function(e,n){if(!(null===t||typeof t.Module.canvas>"u"))return t.Module.canvas.toDataURL(e,n);console.warn(U.errorMessages.screenshotNoUnityInstanceOrCanvas)}),[t]),h=(0,v.useCallback)((function(){return null===t?(console.warn(U.errorMessages.quitNoUnityInstance),Promise.reject()):t.Quit()}),[t]),E=(0,v.useCallback)((function(){return he(void 0,void 0,void 0,(function(){var e;return Ee(this,(function(n){switch(n.label){case 0:return null===t||typeof t.Module.canvas>"u"?(console.warn(U.errorMessages.genericNoUnityInstance),[2,Promise.reject()]):(e=t.Module.canvas,document.body.appendChild(e),e.style.display="none",[4,h()]);case 1:return n.sent(),e.remove(),[2]}}))}))}),[t]);return(0,v.useEffect)((function(){l(1===a)}),[a]),{unityProvider:b.current,loadingProgression:a,initialisationError:d,isLoaded:u,UNSAFE__unityInstance:t,requestFullscreen:p,requestPointerLock:m,sendMessage:g,unload:h,takeScreenshot:w,addEventListener:y.addEventListener,removeEventListener:y.removeEventListener,UNSAFE__detachAndUnloadImmediate:E}};k.useUnityContext=Ie,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useUnityContext=e.Unity=void 0;var n=I;Object.defineProperty(e,"Unity",{enumerable:!0,get:function(){return n.Unity}});var t=k;Object.defineProperty(e,"useUnityContext",{enumerable:!0,get:function(){return t.useUnityContext}})}(H);export{H as e};