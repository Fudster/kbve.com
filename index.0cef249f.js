import{R as a}from"./chunks/index.0d03162d.js";import{b as y,H as S,a as k}from"./chunks/Button.2b6dfff2.js";import"./chunks/styles.module.15095df9.js";import{j as t}from"./chunks/jsx-runtime.44949ced.js";import{u as E,C as T}from"./chunks/useCookies.d8b58892.js";import{S as l,T as u}from"./chunks/TextField.4d6ba0aa.js";import{z as P}from"./chunks/Menu.1dfd0068.js";import"./chunks/index.469f5992.js";//!
const L=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),H=({url:e="https://api.kbve.com/api/auth/local/",display:s=!0})=>{const[o,n]=a.useState(!1),[r,i]=a.useState(""),[c,d]=a.useState(""),[p,m]=E(["member"]),[f,h]=useState(!1);//! Core -> [START] -> EOF
return t.exports.jsx(l,{direction:"column",alignItems:"center",children:t.exports.jsx(P,{variant:"outlined",children:t.exports.jsx(y,{component:"form",maxWidth:"sm",children:t.exports.jsxs(l,{direction:"column",justifyContent:"center",spacing:2,p:2,sx:{flex:1},children:[t.exports.jsx(u,{id:"email-input",type:"email",label:"Email",value:r,error:""!==r&&!L(r),onChange:e=>i(e.target.value),disabled:f}),t.exports.jsx(u,{id:"password-input",type:"password",label:"Password",value:c,error:""!==c,onChange:e=>d(e.target.value),disabled:f}),t.exports.jsx(S,{sitekey:"e77af3f6-a0e3-44b7-82f8-b7c098d38022",onVerify:(e,t)=>((e,t)=>{console.log({token:e,eKey:t}),n(e)})(e,t)}),t.exports.jsx(T,{in:!!o,children:t.exports.jsx(l,{direction:"column",alignItems:"flex-end",children:t.exports.jsx(k,{variant:"contained",fullWidth:!0,onClick:async t=>{t.preventDefault(),h(!0),await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:r,password:c,token:o})}).then((async e=>{if(!e.ok)return h(!1),console.error(`\tLoginConfirmation::An Error Occurred (${e.statusText})`),console.log(`Error: ${e}`),new Error(e.statusText);const t=await e.json().then((e=>{console.log("Data:",e),console.log("JWT",e.jwt),console.log("User",e.user),new Promise(((t,s)=>{t(((e,t)=>{m("jwt",e,{path:"/",domain:".kbve.com"}),m("user",t,{path:"/",domain:".kbve.com"})})(e.jwt,e.user))})).then(window.location="https://kbve.com/profile")}));console.log(`\tRegisterConfirmation::Success:\n${JSON.stringify(t,null,2)}`)}))},disabled:à¶ž,children:"Sign Up"})})})]})})})})};export{H as default};