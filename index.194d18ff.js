import{R as s}from"./chunks/index.a8ca6e14.js";import{a as b,H as k,B as L}from"./chunks/Button.9e056cfd.js";import"./chunks/index.e3b0c442.0d451f5c.js";import{j as t}from"./chunks/jsx-runtime.0a896785.js";import{u as T}from"./chunks/useCookies.7df288f7.js";import{S as l}from"./chunks/Stack.0241f2e4.js";import{P as E}from"./chunks/utils.1e874cac.js";import{T as d}from"./chunks/TextField.3ed6a707.js";import{C as P}from"./chunks/Collapse.f9a36da3.js";import"./chunks/_commonjsHelpers.37791fd4.js";import"./chunks/ButtonBase.e35295c1.js";import"./chunks/index.ad1499c9.js";import"./chunks/Menu.3c861ec9.js";const R=n=>String(n).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),q=({url:n="https://api.kbve.com/api/auth/local/",display:O=!0})=>{const p=s.useRef(null),f="e77af3f6-a0e3-44b7-82f8-b7c098d38022",[m,h]=s.useState(!1),x=(e,o)=>{console.log({token:e,eKey:o}),h(e)},[r,g]=s.useState(""),[a,j]=s.useState(""),[$,C]=T(["user"]),S=e=>{C("user",e,{path:"/",domain:".kbve.com",secure:!0,sameSite:"strict"})},[c,u]=s.useState(!1);s.useState(!1);//! Core -> [START] -> EOF
const w=async e=>{e.preventDefault(),u(!0),await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:r,password:a,token:m})}).then(async o=>{if(!o.ok)return u(!1),p.current?.resetCaptcha(),console.error(`	LoginConfirmation::An Error Occurred (${o.statusText})`),console.log(`Error: ${o}`),new Error(o.statusText);const y=await o.json().then(i=>{console.log("Data:",i),console.log("JWT",i.jwt),console.log("User",i.user),new Promise((v,A)=>{v(S(i.user))}).then(window.location="https://kbve.com/profile")});console.log(`	LoginConfirmation::Success:
${JSON.stringify(y,null,2)}`)})};return t.exports.jsx(l,{direction:"column",alignItems:"center",children:t.exports.jsx(E,{variant:"outlined",children:t.exports.jsx(b,{component:"form",maxWidth:"sm",children:t.exports.jsxs(l,{direction:"column",justifyContent:"center",spacing:2,p:2,sx:{flex:1},children:[t.exports.jsx(d,{id:"email-input",type:"email",label:"Email",value:r,error:r!==""&&!R(r),onChange:e=>g(e.target.value),disabled:c}),t.exports.jsx(d,{id:"password-input",type:"password",label:"Password",value:a,error:a!=="",onChange:e=>j(e.target.value),disabled:c}),t.exports.jsx(k,{ref:p,sitekey:f,onVerify:(e,o)=>x(e,o)}),t.exports.jsx(P,{in:!!m,children:t.exports.jsx(l,{direction:"column",alignItems:"flex-end",children:t.exports.jsx(L,{variant:"contained",fullWidth:!0,onClick:w,disabled:c,children:"Login"})})})]})})})})};export{q as default};
