import{R as o}from"./chunks/index.0d03162d.js";import{B as E,H as T}from"./chunks/Box.21f30a03.js";import"./chunks/index.e3b0c442.0d451f5c.js";import{j as t}from"./chunks/jsx-runtime.44949ced.js";import{u as B}from"./chunks/useCookies.35608aca.js";import{S as m}from"./chunks/Stack.3b744c5d.js";import{P as O}from"./chunks/TransitionGroupContext.cf51fb81.js";import{T as l}from"./chunks/TextField.23903c20.js";import{C as $}from"./chunks/Collapse.1512b328.js";import{B as A}from"./chunks/Button.2be3cbd4.js";import"./chunks/ButtonBase.be32d9b8.js";import"./chunks/utils.8a5a1752.js";import"./chunks/index.469f5992.js";import"./chunks/Menu.f59fefd9.js";//! IMPORT -> [START]
const I=c=>String(c).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),Y=({url:c="https://api.kbve.com/api/auth/local/register",display:L=!0})=>{const d=o.useRef(null),x="e77af3f6-a0e3-44b7-82f8-b7c098d38022",[u,h]=o.useState(!1),g=(e,s)=>{console.log({token:e,eKey:s}),h(e)},[p,C]=o.useState(""),[i,j]=o.useState(""),[r,w]=o.useState(""),[n,v]=o.useState(""),[U,S]=B(["user"]),b=e=>{S("user",e,{path:"/",domain:".kbve.com",secure:!0,sameSite:"strict"})},[a,f]=o.useState(!1);//! Core -> [START] -> EOF
const y=async e=>{e.preventDefault(),f(!0),await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,email:i,password:r,token:u})}).then(async s=>{if(!s.ok)return f(!1),d.current?.resetCaptcha(),console.error(`	RegisterConfirmation::An Error Occurred (${s.statusText})`),console.log(`Error: ${s}`),new Error(s.statusText);const k=await s.json().then(P=>{new Promise((R,V)=>{R(b(P.user))}).then(window.location="https://kbve.com/profile")});console.log(`	RegisterConfirmation::Success:
${JSON.stringify(k,null,2)}`)})};return t.exports.jsx(m,{direction:"column",alignItems:"center",children:t.exports.jsx(O,{variant:"outlined",children:t.exports.jsx(E,{component:"form",maxWidth:"sm",children:t.exports.jsxs(m,{direction:"column",justifyContent:"center",spacing:2,p:2,sx:{flex:1},children:[t.exports.jsx(l,{id:"username-input",type:"username",label:"Username",value:p,error:p!=="",onChange:e=>C(e.target.value),disabled:a}),t.exports.jsx(l,{id:"email-input",type:"email",label:"Email",value:i,error:i!==""&&!I(i),onChange:e=>j(e.target.value),disabled:a}),t.exports.jsx(l,{id:"password-input",type:"password",label:"Password",value:r,error:r!==""&&r!==n,onChange:e=>w(e.target.value),disabled:a}),t.exports.jsx(l,{id:"confirm-password-input",type:"password",label:"Confirm Password",value:n,error:n!==""&&r!==n,onChange:e=>v(e.target.value),disabled:a}),t.exports.jsx(T,{ref:d,sitekey:x,onVerify:(e,s)=>g(e,s)}),t.exports.jsx($,{in:!!u,children:t.exports.jsx(m,{direction:"column",alignItems:"flex-end",children:t.exports.jsx(A,{variant:"contained",fullWidth:!0,onClick:y,disabled:a,children:"Sign Up"})})})]})})})})};export{Y as default};
