import{R as o}from"./chunks/index.0d03162d.js";import{B as E,H as T}from"./chunks/Box.607ce137.js";import"./chunks/styles.module.d7c222e5.js";import{j as t}from"./chunks/jsx-runtime.44949ced.js";import{u as B}from"./chunks/useCookies.35608aca.js";import{S as p}from"./chunks/Stack.b172f5be.js";import{P as O}from"./chunks/TransitionGroupContext.59b44132.js";import{T as l}from"./chunks/TextField.c1c431ef.js";import{C as $}from"./chunks/Collapse.805f19a0.js";import{B as A}from"./chunks/Button.69891491.js";import"./chunks/ButtonBase.1805c610.js";import"./chunks/utils.0a856f7b.js";import"./chunks/index.469f5992.js";import"./chunks/Menu.99b9d12d.js";//! IMPORT -> [START]
const I=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),Y=({url:e="https://api.kbve.com/api/auth/local/register",display:s=!0})=>{const r=o.useRef(null),[n,a]=o.useState(!1),[i,c]=o.useState(""),[u,m]=o.useState(""),[d,h]=o.useState(""),[x,f]=o.useState(""),[j,k]=B(["member"]),[b,g]=o.useState(!1);//! Core -> [START] -> EOF
return t.exports.jsx(p,{direction:"column",alignItems:"center",children:t.exports.jsx(O,{variant:"outlined",children:t.exports.jsx(E,{component:"form",maxWidth:"sm",children:t.exports.jsxs(p,{direction:"column",justifyContent:"center",spacing:2,p:2,sx:{flex:1},children:[t.exports.jsx(l,{id:"username-input",type:"username",label:"Username",value:i,error:""!==i,onChange:e=>c(e.target.value),disabled:b}),t.exports.jsx(l,{id:"email-input",type:"email",label:"Email",value:u,error:""!==u&&!I(u),onChange:e=>m(e.target.value),disabled:b}),t.exports.jsx(l,{id:"password-input",type:"password",label:"Password",value:d,error:""!==d&&d!==x,onChange:e=>h(e.target.value),disabled:b}),t.exports.jsx(l,{id:"confirm-password-input",type:"password",label:"Confirm Password",value:x,error:""!==x&&d!==x,onChange:e=>f(e.target.value),disabled:b}),t.exports.jsx(T,{ref:r,sitekey:"e77af3f6-a0e3-44b7-82f8-b7c098d38022",onVerify:(e,t)=>((e,t)=>{console.log({token:e,eKey:t}),a(e)})(e,t)}),t.exports.jsx($,{in:!!n,children:t.exports.jsx(p,{direction:"column",alignItems:"flex-end",children:t.exports.jsx(A,{variant:"contained",fullWidth:!0,onClick:async t=>{t.preventDefault(),g(!0),await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:u,password:d,token:n})}).then((async e=>{if(!e.ok)return g(!1),r.current?.resetCaptcha(),console.error(`\tRegisterConfirmation::An Error Occurred (${e.statusText})`),console.log(`Error: ${e}`),new Error(e.statusText);const t=await e.json().then((e=>{new Promise(((t,s)=>{t((e=>{k("user",e,{path:"/",domain:".kbve.com",secure:!0,sameSite:"strict"})})(e.user))})).then(window.location="https://kbve.com/profile")}));console.log(`\tRegisterConfirmation::Success:\n${JSON.stringify(t,null,2)}`)}))},disabled:b,children:"Sign Up"})})})]})})})})};export{Y as default};