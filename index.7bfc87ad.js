import{R as s}from"./chunks/index.a8ca6e14.js";import"./chunks/index.ad1499c9.js";import{a as T,H as A,B as D}from"./chunks/Button.9e056cfd.js";import{j as e}from"./chunks/jsx-runtime.0a896785.js";import{u as O}from"./chunks/useCookies.7df288f7.js";import{S as f}from"./chunks/Stack.0241f2e4.js";import{P as U}from"./chunks/utils.1e874cac.js";import{T as d}from"./chunks/TextField.3ed6a707.js";import{C as $}from"./chunks/Collapse.f9a36da3.js";import"./chunks/_commonjsHelpers.37791fd4.js";import"./chunks/ButtonBase.e35295c1.js";import"./chunks/Menu.3c861ec9.js";//! [IMPORT] -> [START]
const B=r=>String(r).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);//! [CORE] -> [START]
function I(r,a){s.useEffect(()=>{let n=!0;return r().then(p=>{n?a(p):console.log("aborted setState on unmounted component")}),()=>{n=!1}},[r,a])}const L=()=>{const[r,a]=s.useState("loading (4 sec)...");return I(W,a),e.exports.jsx(z,{})},V=()=>(s.useState(!0),e.exports.jsx("div",{children:e.exports.jsx(L,{})})),W=()=>new Promise(r=>setTimeout(()=>r("data fetched"),4e3));class te extends s.Component{constructor(a){super(a),this.state={load:!1,hasError:!1,captchaRef:null},this.listRef=s.createRef()}static getDerivedStateFromError(a){return{hasError:!0}}componentWillUnmount(){this.state.load=!1}componentDidMount(){this.state.load=!0}render(){return this.state.hasError?e.exports.jsx("h1",{children:"Something went wrong."}):e.exports.jsx(V,{})}}const z=({url:r="https://api.kbve.com/api/auth/local/register",display:a=!0})=>{const n=s.useRef(null),p="e77af3f6-a0e3-44b7-82f8-b7c098d38022",[h,g]=s.useState(!1),C=(t,o)=>{console.log({token:t,eKey:o}),g(t)},[m,j]=s.useState(""),[c,S]=s.useState(""),[i,w]=s.useState(""),[u,v]=s.useState(""),[F,b]=O(["user"]),y=t=>{b("user",t,{path:"/",domain:".kbve.com",secure:!0,sameSite:"strict"})},[l,x]=s.useState(!1);//! Core -> [START] -> EOF
const R=async t=>{t.preventDefault(),x(!0),await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,email:c,password:i,token:h})}).then(async o=>{if(!o.ok)return x(!1),n.current?.resetCaptcha(),console.error(`	RegisterConfirmation::An Error Occurred (${o.statusText})`),console.log(`Error: ${o}`),new Error(o.statusText);const k=await o.json().then(E=>{new Promise((P,H)=>{P(y(E.user))}).then(window.location="https://kbve.com/profile")});console.log(`	RegisterConfirmation::Success:
${JSON.stringify(k,null,2)}`)})};//! [CORE] -> {Function} -> [ReactRegister] -> [END]
return e.exports.jsx(f,{direction:"column",alignItems:"center",children:e.exports.jsx(U,{variant:"outlined",children:e.exports.jsx(T,{component:"form",maxWidth:"sm",children:e.exports.jsxs(f,{direction:"column",justifyContent:"center",spacing:2,p:2,sx:{flex:1},children:[e.exports.jsx(d,{id:"username-input",type:"username",label:"Username",value:m,error:m!=="",onChange:t=>j(t.target.value),disabled:l}),e.exports.jsx(d,{id:"email-input",type:"email",label:"Email",value:c,error:c!==""&&!B(c),onChange:t=>S(t.target.value),disabled:l}),e.exports.jsx(d,{id:"password-input",type:"password",label:"Password",value:i,error:i!==""&&i!==u,onChange:t=>w(t.target.value),disabled:l}),e.exports.jsx(d,{id:"confirm-password-input",type:"password",label:"Confirm Password",value:u,error:u!==""&&i!==u,onChange:t=>v(t.target.value),disabled:l}),e.exports.jsx(A,{ref:n,sitekey:p,onVerify:(t,o)=>C(t,o)}),e.exports.jsx($,{in:!!h,children:e.exports.jsx(f,{direction:"column",alignItems:"flex-end",children:e.exports.jsx(D,{variant:"contained",fullWidth:!0,onClick:R,disabled:l,children:"Sign Up"})})})]})})})})};export{te as default};
